# chaltteok
자연스러운 한국어를 꿈꾸는 프로그래밍 언어 '찰떡'의 명세와 구현체입니다.

[구현체](https://dragonteros.github.io/chaltteok-ide/) 페이지에서 테스트해보실 수 있습니다!

## 예시

### 산술 예시
* `1과 2의 합.`
  
  결과: 3

* `3과 4의 차.`

  결과: 1

* `1과 2과 3을 더한 값.`

  결과: 6

* `영점오와 마이너스 사를 곱한 값.`

  결과: -2

* `7을 2로 나눈 값.`

  결과: 3.5

* `7을 2로 나눈 몫.`

  결과: 3

* `7을 2로 나눈 나머지.`

  결과: 1

### 연산 결합 예시

* `1과 2를 더해 3과 곱한 값.`

  결과: 9

### 변수 예시

* `1을 '초깃값'으로 삼는다. 마이너스 이를 '차분'으로 두자. '초깃값'과 '차분'의 합.`

  결과: -1

### 조건 예시
* `1을 '변수'라고 하고 '변수'가 5보다 작으면 10 아니면 0을 -5와 더한다. '변수'.`

  결과: 5

### 반복 예시

* `0을 '지표'로 삼고 2를 '결과'라고 하자. '지표'가 0과 같을 때까지 '결과'의 제곱을 '결과'로 삼고 '지표'와 1의 합을 '지표'로 하자. '결과'.`

  결과: 2

* `0을 '지표'로 삼고 2를 '결과'라고 하자. '지표'가 2와 같을 때까지 '결과'의 제곱을 '결과'로 삼고 '지표'와 1의 합을 '지표'로 하자. '결과'.`

  결과: 8

## 명세
'찰떡' 프로그램은 마침표로 끝나는 문장의 나열로 이루어진 문자열입니다.
문장은 공백으로 구분된 여러 어절로 이루어집니다. 어절은 다음과 같이 중심 단어에 여러 조사, 어미, 접미사가 선택적으로 결합한 형태입니다.

* `삼천이백` <- `삼천이백` (중심 단어)
* `세제곱의` <- `세` (중심 단어) + `-제곱` (접미사) + `의` (조사)
* `더하자` <- `더하다` (중심 단어) + `-자` (어미)

'찰떡'에서 중심 단어는 명사, 동사, 형용사, 관형사, 부사의 다섯 가지 품사를 지닌 단어가 올 수 있으며, 명사는 접미사와 조사, 동사와 형용사는 어미에 결합할 수 있습니다. 관형사는 명사의 앞에 붙어서, 부사는 동사와 형용사의 앞에 붙어서 뒤의 단어에 새로운 의미를 부여합니다.

한국어에서와 마찬가지로 단어에 조사와 어미를 적절히 결합하여 다른 품사로 전환할 수 있습니다.

* 명사 + `이다` → 형용사
* 명사 + `의` → 관형사
* 명사 + `이(가)`, `을(를)`, ... → 부사

* 동사/형용사 + `-(으)ㅁ` → 명사
* 동사/형용사 + `-(으)ㄴ` → 관형사

### 수사
'찰떡'은 다음과 같은 형식의 수사를 인식합니다. '찰떡'에서 수사(수관형사 포함)는 기술적인 이유로 모두 명사로 취급합니다.

* 쉼표로 구분된 인도-아라비아 숫자
  + 예: `0.12`, `+12,345,678.900`
* 지수 표기법
  + 예: `−1.602e−19`
* 만의 자리에서 띄어쓴 한자어 수사
  + 예: `일억 이천삼백사십오만 육천칠백팔십구`
* 십의 자리마다 인도-아라비아 숫자를 적은 한자어 수사
  + 예: `1억 2천3백4십5만 6천7백8십9`
* 만의 자리마다 인도-아라비아 숫자를 적은 한자어 수사
  + 예: `1억 2345만 6789`

`...의 ...제곱` 꼴의 두번째 인수에 한해 순우리말 수사도 함께 인식합니다.
* 예: `10의 세제곱`

### 단어 결합 규칙
한국어와 같은 자연어는 같은 문장이 여러가지 의미로 읽힐 수 있는 중의성이 있습니다. 특히 다음과 같이 단어를 결합하는 순서에 따라 다른 의미를 지니는 구조적 중의성을 생각할 수 있습니다.

![머리가 빨간 생선을 먹는 고양이](https://pbs.twimg.com/media/BnqSR2IIEAAIPW4?format=png&name=medium)
(그림 출처: [트위터 @kjoonlee](https://twitter.com/kjoonlee/status/466846348541558784))

'찰떡'에서는 기본적으로 앞쪽의 단어부터 먼저 결합하는 좌결합 방식을 채택하고 있습니다. 쉼표(`,`)를 사용하면 쉼표 앞뒤 구절의 결합을 문장이 끝나거나 다음 쉼표를 만나기 전까지 최대한 후순위로 미룹니다.

* `2분의 5분의 1.` → `0.4`
  + 가장 앞에 있는 `2분의 5`가 먼저 결합됩니다.
* `2분의, 5분의 1.` → `0.1`
  + 뒤에 있는 `5분의 1`이 먼저 결합됩니다.

특히 결합 순서로 인해 유효한 문장이 만들어지지 않는 경우 다음과 같이 쉼표를 사용해 원하는 결합 순서를 강제해야 합니다.
* `1과 2의 곱과 3과 4의 곱의 합.`
  + `1과 2의 곱과 3과 4`가 먼저 결합합니다. `합`은 두 개 이상의 인수를 요구하기 때문에 구문 분석 오류가 발생합니다.
* `1과 2의 곱과, 3과 4의 곱의, 합.`
  + `1과 2의 곱` 및 `3과 4의 곱`이 각자 먼저 결합합니다. 원하는 결과 `14`를 얻습니다.

### 주석
소괄호(`(...)`)로 감싼 부분은 주석으로 처리됩니다. 즉, 프로그램 실행 시 해당 부분은 존재하지 않는 것으로 생각합니다.

### 자료형
'찰떡'에서 객체는 `'수'`, `'참거짓'`, `'나눔'`이라는 세 가지 자료형을 지닙니다. `'수'`는 앞서 설명한 수사로, `'참거짓'`은 `참`, `거짓`이라는 단어로 생성할 수 있습니다.

`'나눔'`은 `'수'로 '수'를 나누다`와 같은 연산으로 나눗셈을 수행한 결과로 얻는 자료형입니다. `'나눔'의 값`, `'나눔'의 나머지`, `'나눔'의 몫` 연산으로 각각 실수 나눗셈 결과, 정수 나눗셈의 몫, 정수 나눗셈의 나머지를 얻을 수 있습니다.

### 변수
'찰떡'에서 변수의 이름은 `'결과'`처럼 따옴표(`'...'`)로 감싼, 공백을 포함하지 않는 문자열로 표기합니다. 이 규칙은 변수를 선언할 때와 사용할 때 모두 적용됩니다.

### 인수 생략
특정 연산의 경우 인수를 생략하면 이전 연산의 결과를 가져와 해당 인수로 전달할 수 있습니다. 인수는 한 개까지만 생략할 수 있습니다. 

인수 생략 시 전달할 값을 지정하려면 어미 `-(아/어)`를 사용합니다.

예를 들어 다음 두 문장은 같은 의미입니다.
* `1과 2를 더해 3에서 뺀 값`
* `3에서 1과 2를 더한 것을 뺀 값`

### 연산 일람
다음 일람에서 따옴표(`'...'`)는 각 자리에 해당 연산이 요구하는 인수의 자료형과 개수를 의미합니다. 여러 개의 인수를 넣기 위해서는 여러 명사를 조사 `과(와)`로 결합합니다. 또 대괄호(`[...]`)로 묶은 부분은 생략 가능 인수를 표시합니다.

예를 들어 '수'는 `3`과 같은 하나의 수, '두 수'는 `3과 4`와 같은 두 수, '여러 수'는 `1과 2`이나 `1과 2와 3` 등과 같은 두 개 이상의 수를 받아들일 수 있습니다.

다음 일람에서 따옴표 다음에 붙은 조사 `의`는 `동사 + -(으)ㄴ`과 같은 모든 관형사를 대표합니다. 또한 `'T'`는 임의의 자료형을 의미합니다.

#### 값
* `'수'의 값` → `'수'`
* `'나눔'의 값` → `'수'`

#### 산술
* `['수'를] '수'와 더하다` → `'수'`
* `'여러 수'를 더하다` → `'수'`
* `'여러 수'의 합` → `'수'`
* `'수'를 '수'에서 빼다` → `'수'`
* `['수'에서] ['수'를] 빼다` → `'수'`
* `'두 수'의 차` → `'수'`
* `['수'를] '수'와 곱하다` → `'수'`
* `'여러 수'를 곱하다` → `'수'`
* `'여러 수'의 곱` → `'수'`
* `'수'분의 '수'` → `'수'`
* `'수'로 '수'를 나누다` → `'나눔'`
* `['수'를] ['수'로] 나누다` → `'나눔'`
* `'나눔'의 나머지` → `'수'`
* `'나눔'의 몫` → `'수'`
* `'수'로 '수'가 나누어떨어지다` → `'참거짓'`
* `['수'가] ['수'로] 나누어떨어지다` → `'참거짓'`
* `'수'의 제곱` → `'수'`
* `'수'의 '수'제곱` → `'수'`

#### 대소 비교
* `'수'보다 '수'가 작다` → `'참거짓'`
* `['수'가] '수'보다 작다` → `'참거짓'`
* `'수'보다 '수'가 크다` → `'참거짓'`
* `['수'가] '수'보다 크다` → `'참거짓'`
* `['수'가] '수' 이상이다` → `'참거짓'`
* `['수'가] '수' 이하이다` → `'참거짓'`
* `['수'가] '수' 초과이다` → `'참거짓'`
* `['수'가] '수' 미만이다` → `'참거짓'`
* `['수'가] '수' 이상 '수' 미만이다` → `'참거짓'`
* `['수'가] '수' 이상 '수' 이하이다` → `'참거짓'`
* `['수'가] '수' 초과 '수' 미만이다` → `'참거짓'`
* `['수'가] '수' 초과 '수' 이하이다` → `'참거짓'`

#### 논리 연산
* `['T'가] 'T'와 같다` → `'참거짓'`
* `'여러 T'가 같다` → `'참거짓'`
* `['T'가] 'T'와 다르다` → `'참거짓'`
* `'여러 T'가 다르다` → `'참거짓'`
* `['T'가] 'T'이다` → `'참거짓'`
* `['T'가] 'T'가 아니다` → `'참거짓'`
* `'참거짓'인지` → `'참거짓'`
* `'참거짓'이거나 '참거짓'` → `'참거짓'`
* `'참거짓'이지 않다` → `'참거짓'`

#### 조건문
* `'참거짓'이면 'T' 아니면 'T'` → `'T'`

#### 변수 선언
* `['T'를] '변수'로 두다`
* `['T'를] '변수'로 삼다`
* `['T'가] '변수'가 되다`
* `['T'가] '변수'로 되다`
* `['T'를] '변수'로 하다`
* `['T'를] '변수'라고 하다`

#### 반복
* `'참거짓'일 때까지 'T'하다` → `'T'`
* `'참거짓'일 때까지 'T'한다` → `'T'`
* `'참거짓'일 때까지 'T'하자` → `'T'`

## 같이 보기
* [누리 : 함수형 한글 프로그래밍 언어](https://github.com/suhdonghwi/nuri)
